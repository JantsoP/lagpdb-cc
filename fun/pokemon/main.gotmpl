{{/*
    Recommended trigger: -whosthatpokemon (exact match or command)  If you change this, make sure you hange it in response detector command

    Author: StinkySlinky#8071
    Lincense: AGPL-3.0
    Copyright (c): 2021
*/}}

{{if not (dbGet .User.ID "whosthat").Value}}{{$enemy := (toString (randInt 1 810))}}{{$dict := dict}}{{- range $key, $value := (dbGet 1 "Names").Value -}}{{- $dict.Set $key $value -}}{{end}}{{$ID := (sendMessageNoEscapeRetID nil (complexMessage "content" (print .User.Mention) "embed" (cembed "title" "Who's this pokémon!?" "description" (print "This can only be answered by **" .User.Username "**.\nYou have 10 seconds!") "image" (sdict "url" (print "https://assets.pokemon.com/assets/cms2/img/pokedex/full/" $enemy ".png")))))}}{{dbSetExpire .User.ID "whosthat" ($dict.Get (toInt64 $enemy)) 11}}{{sleep 10}}{{if (dbGet .User.ID "whosthat").Value}}{{editMessage nil $ID (complexMessageEdit "content" (print "You're out of time, " .User.Mention ".\nThe pokémon was **" ($dict.Get (toInt64 $enemy)) "**.") "embed" nil)}}{{end}}{{else}}You're already trying to guess a pokémon!{{end}}{{deleteTrigger 0}}